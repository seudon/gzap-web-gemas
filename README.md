# スターマス（Star Math）

小学一年生向けの足し算学習ゲーム。GSAPアニメーションを活用した、楽しく学べる教育コンテンツです。

## 🎮 デモ

**▶️ プレイはこちら: https://seudon.github.io/gzap-web-games/**

## ゲーム概要

### コンセプト
「宇宙を旅しながら足し算をマスターしよう！」

正しい答えをクリックすると、派手なエフェクトとともに星が輝く。連続正解でどんどん豪華な演出に！
レベルが上がるにつれて、ボタンが動いて少し難しくなるけど、計算はシンプルで楽しい。

### ゲームの特徴
- **楽しいアニメーション**: GSAPを使った滑らかで派手なエフェクト
- **段階的な難易度**: ボタンの動きで適度な難しさ
- **達成感**: 連続正解で進化するエフェクト
- **宇宙テーマ**: 星・惑星・宇宙空間の美しいビジュアル

## ゲーム仕様

### レベル設計
- **レベル1-10**: 1-10までの足し算
- **レベル11-20**: 1-20までの足し算
- **最終目標**: レベル20クリア

### ボタンアニメーション（難易度）
| レベル | ボタンサイズ | 移動距離 | ボタンの動き |
|--------|-------------|----------|-------------|
| Lv1    | 1.0 | 0px | 完全に静止 |
| Lv2    | 1.0 | ±5-6px | 各ボタンが異なる方向に脈動 |
| Lv3    | 1.0 | ±30px | 上下左右に移動 |
| Lv4    | 1.0 | ±40px | 斜め方向に移動 |
| Lv5    | 1.0 | ±50px | 複雑な軌道（四角形、斜め） |
| Lv6    | 1.0 | ±55px | 回転＋移動 |
| Lv7    | 1.0 | ±60px | 8の字、楕円、ジグザグ軌道 |
| Lv8    | 1.0 | ±70px | 星型、ハート型軌道（ボタンが重なり始める） |
| Lv9    | 1.0 | ±80px | 高速ランダム移動（ボタンが重なる） |
| Lv10   | 1.0 | ±90px | 超高速ランダム移動（最大限に重なる） |
| Lv11-15| 0.97→0.85 | ±100px | ボタン縮小開始＋ランダム高速移動 |
| Lv16-20| 0.82→0.70 | ±120-150px | ボタンさらに縮小＋超激しい動き（3種類のパターン） |

### エフェクトの進化（7段階システム）
| 連続正解数 | エフェクト |
|-----------|-----------|
| コンボ1    | 基本エフェクト：小パーティクル（10個）+ ボタン拡大 |
| コンボ2-3  | パーティクル増加（20個）+ 回転 + 画面フラッシュ（強度0.15） |
| コンボ4-5  | 中パーティクル（30個）+ 虹色リング（1個）+ フラッシュ（強度0.25） |
| コンボ6-7  | 大パーティクル（45個）+ 螺旋パーティクル（15個）+ 虹色リング（2個）+ 放射グロー + フラッシュ（強度0.35） |
| コンボ8-10 | 超派手：大パーティクル（70個）+ 螺旋（25個）+ ハート軌道（15個）+ 虹色リング（3個）+ カラフル波紋 + 浮遊テキスト + 画面シェイク（6px）+ 背景パルス + フラッシュ（強度0.5） |
| コンボ11-15| 極派手：星パーティクル（90個）+ 螺旋（30個）+ ハート（20個）+ 星型爆発（5頂点）+ 虹色リング（4個）+ 光の柱 + 流れ星 + 浮遊テキスト + 画面シェイク（10px）+ フラッシュ（強度0.7） |
| コンボ16-20| 超最高：星パーティクル（110個）+ 螺旋（35個）+ ハート（25個）+ 爆発（25個）+ 星型爆発（7頂点）+ 虹色リング（5個）+ 光の柱 + レーザービーム（8方向）+ 浮遊テキスト + 画面シェイク（14px）+ ズーム＋回転 + 流れ星 + 花火 + オーロラ + フラッシュ（強度0.85） |
| コンボ21+  | 究極：星パーティクル（80個）+ 螺旋（25個）+ ハート（20個）+ 爆発（20個）+ 星型爆発（8頂点）+ 虹色リング（5個）+ 光の柱（複数）+ レーザービーム + オーロラ + 浮遊テキスト + 画面シェイク（15px）+ ズーム＋回転 + 流れ星 + 花火 + フラッシュ（強度0.85）※パフォーマンス最適化版 |
| レベルアップ | 全画面オーバーレイ + タイトル回転拡大アニメーション（"LEVEL UP!"） + フェードイン/アウト |

### ゲームルール
- 正解すると: 経験値UP、エフェクト発動、次の問題へ
- 不正解すると: エフェクトリセット、経験値減少なし、再チャレンジ
- レベルアップ: 経験値が一定値に達すると派手な演出とともにレベルアップ

## 技術スタック

### 使用技術
- **HTML5**: セマンティックHTML
- **CSS3**: Flexbox/Grid、アニメーション
- **JavaScript (ES6+)**: バニラJS（フレームワークなし）
- **GSAP**: アニメーションライブラリ（CDN経由）

### 外部ライブラリ
- [GSAP (GreenSock Animation Platform)](https://gsap.com/) - アニメーション制御

### ブラウザ対応
- Chrome（推奨）
- Safari
- Edge
- Firefox

## ディレクトリ構造

```
/gzap-web-gemas
├── index.html              # メインHTMLファイル
├── css/
│   └── style.css          # スタイルシート
├── js/
│   ├── main.js            # ゲームロジック
│   └── animations.js      # GSAPアニメーション定義
├── images/                # 画像素材（後で追加）
│   ├── bg-space.jpg       # 背景画像
│   ├── planets/           # 惑星アイコン（ボタン用）
│   ├── particles/         # パーティクル用画像
│   └── astronaut.png      # キャラクター（オプション）
├── README.md              # このファイル
└── CLAUDE.md              # 開発ガイドライン
```

## セットアップ

### 必要な環境
- モダンなWebブラウザ
- ローカルサーバー（オプション、開発時推奨）

### 起動方法

#### 方法1: 直接HTMLファイルを開く
```bash
# ファイルをダブルクリックで開く
open index.html  # macOS
start index.html # Windows
```

#### 方法2: ローカルサーバーを起動（推奨）
```bash
# Python 3の場合
python -m http.server 8000

# Node.jsのhttp-serverを使う場合
npx http-server -p 8000
```

ブラウザで `http://localhost:8000` にアクセス

## 開発ロードマップ

### Phase 1: プロトタイプ作成 ✅ (完了)
- [x] プロジェクト設計
- [x] 基本HTML構造
- [x] CSS基礎スタイル（カラフルな図形で代用）
- [x] ゲームロジック実装
- [x] GSAPアニメーション基本実装
- [x] Phase 1-A: ボタン動作の基本実装
  - [x] 各ボタンが独立した動きをする仕組み
  - [x] レベル1-20の段階的な難易度実装
  - [x] グローバルアニメーション制御システム（レベル切り替え時のバグ修正）
- [x] Phase 1-B: レベル別動作の完全実装
  - [x] Lv1-10: 移動距離を徐々に増加（±5px → ±90px）
  - [x] Lv11-15: ボタン縮小（0.97→0.85）＋移動距離±100px
  - [x] Lv16-20: さらに縮小（0.82→0.70）＋移動距離±120-150px
  - [x] デバッグパネル実装（レベル1-20即座切り替え機能）
- [x] エフェクトシステム基本実装
  - [x] パーティクルエフェクト
  - [x] 正解・不正解フィードバック
  - [x] レベルアップエフェクト
  - [x] ゲームクリアエフェクト

### Phase 2: エフェクト強化 ✅ (完了)
- [x] パーティクル数・派手さの調整
  - [x] コンボ数に応じた7段階のエフェクト実装
  - [x] パーティクル数の段階的調整（10個→110個）
- [x] コンボ数に応じたエフェクト段階的強化
  - [x] コンボ1: 基本エフェクト
  - [x] コンボ2-3: パーティクル増加＋フラッシュ
  - [x] コンボ4-5: 中サイズパーティクル＋光の輪
  - [x] コンボ6-7: 大サイズ＋グロー＋波紋
  - [x] コンボ8-10: 超派手＋波紋＋画面シェイク＋テキスト
  - [x] コンボ11-15: 極派手＋流れ星＋光の柱
  - [x] コンボ16-20: 超最高レベル＋レーザー＋オーロラ
  - [x] コンボ21+: 究極の派手さ（全エフェクト同時発動）
- [x] 画面フラッシュ強度の調整（コンボに応じて0.15-0.85）
- [x] 追加エフェクト実装
  - [x] 虹色リング、螺旋パーティクル、カラフル波紋
  - [x] 爆発型パーティクル、ハート型軌道、星型爆発
  - [x] レーザービーム、光の柱、オーロラ
  - [x] 浮遊テキスト（GOOD/GREAT/EXCELLENT/AMAZING/PERFECT/LEGENDARY）
  - [x] 画面シェイク、背景パルス、ズーム＋回転
  - [x] 流れ星、花火

### Phase 3: ゲームバランス調整 ✅ (完了)
- [x] レベルアップに必要な経験値の調整
  - [x] 初期経験値を10→6に削減
  - [x] レベルアップ計算式を `6 + level * 0.8` に変更
  - [x] コンボボーナス経験値システム実装（コンボ数に応じて1-8経験値）
- [x] パフォーマンス最適化（Phase 3最適化版）
  - [x] コンボ21+のパーティクル数削減（240→145個）
  - [x] フラッシュ強度微調整（0.9→0.85）
  - [x] リング数削減（6→5個）
  - [x] シェイク強度調整（18→15）
  - [x] 花火パーティクル数削減（30→20個/回）
- [x] アニメーション速度の微調整
  - [x] 正解後の次問題表示タイミング（1500ms→1200ms）
  - [x] ボタンアニメーション停止処理の改善
  - [x] 経験値バーのレベルアップアニメーション改善
- [x] レスポンシブ対応
  - [x] 基本CSS実装（@media max-width: 768px, 480px）
  - [x] スマホ向け省略表記実装（Lv., x など）
  - [x] 実機テスト完了（PC Chrome, スマホ Chrome）
- [x] クロスブラウザ確認（主要ブラウザで動作確認済み）

### Phase 4: ビジュアル強化（オプション） (予定)
- [ ] 画像素材の準備
  - [ ] 背景画像（宇宙）
  - [ ] 惑星アイコン（6色）
  - [ ] 星パーティクル（3サイズ）
  - [ ] キラキラエフェクト
  - [ ] 宇宙飛行士キャラクター
- [ ] 画像の組み込み
- [ ] ビジュアル調整

### Phase 5: テスト・改善 (予定)
- [ ] 実際の子供によるテスト
- [ ] フィードバック反映
- [ ] バグ修正
- [ ] 最終調整

## 将来の機能拡張アイデア

以下は現在の基本実装が完成した後に検討する拡張機能です：

### ゲームプレイ拡張
- **時間制限モード**: 各問題に制限時間を設定（オプション設定で有効化）
- **必殺技システム**:
  - 時間停止（制限時間を一時停止してゆっくり考えられる）
  - スローモーション（ボタンの動きを一時的に遅くする）
  - ヒント表示（正解のボタンがキラキラする）
  - 必殺技ゲージ：連続正解で溜まり、ピンチの時に使用可能
- **ライフシステム**: 3回間違えるとゲームオーバー（オプション）

### 学習モード拡張
- **引き算モード**: 引き算問題に対応
- **掛け算モード**: 九九の練習
- **混合モード**: 足し算・引き算をランダムに出題

### ソーシャル機能
- **マルチプレイヤー**: 2人で競争（スコア勝負）
- **ランキング**: ローカルストレージでハイスコア保存
- **実績システム**: 特定条件達成でバッジ獲得

### 演出強化
- **サウンドエフェクト**: 正解音、不正解音、BGM
- **ボイス**: 「すごい！」「がんばれ！」などの応援ボイス
- **ストーリーモード**: 宇宙旅行のストーリーに沿って進行

## 画像素材リスト

### 準備が必要な画像

#### 1. 背景画像
- **ファイル名**: `bg-space.jpg`
- **パス**: `images/bg-space.jpg`
- **サイズ**: 1920x1080px
- **形式**: JPG or PNG

#### 2. 惑星アイコン（ボタン用）
- **ファイル名**: `planet-[color].png`
- **パス**: `images/planets/planet-*.png`
- **サイズ**: 128x128px
- **形式**: PNG（透過）
- **色**: blue, red, yellow, green, purple, orange

#### 3. 星パーティクル
- **ファイル名**: `star-small.png`, `star-medium.png`, `star-large.png`
- **パス**: `images/particles/star-*.png`
- **サイズ**: 32x32px, 64x64px, 128x128px
- **形式**: PNG（透過）

#### 4. キラキラエフェクト
- **ファイル名**: `sparkle.png`
- **パス**: `images/particles/sparkle.png`
- **サイズ**: 64x64px
- **形式**: PNG（透過）

#### 5. 宇宙飛行士（オプション）
- **ファイル名**: `astronaut.png`
- **パス**: `images/astronaut.png`
- **サイズ**: 256x256px
- **形式**: PNG（透過）

詳細な生成AI用プロンプトは開発者に確認してください。

## ライセンス
個人利用・教育目的での使用を想定

## 開発者
教育目的で作成された学習ゲーム

---

**楽しく学ぼう！スターマスで宇宙の冒険へ！** ✨🚀
